"use strict";function confirmPwd(){pwd1.value!=pwd2.value?pwd2.setCustomValidity("Passwords Don't Match"):pwd2.setCustomValidity("")}function enableDisableButton(){hasPhoneError||hasEmailError?$("form").find("button[type='submit']").prop("disabled",!0):$("form").find("button[type='submit']").prop("disabled",!1)}function formattedPhone(){var e;""!=$("#phone").val&&(e=$("#phone").intlTelInput("getNumber").replace(/-|\s/g,""),$("#formattedPhone").val(e))}function validateEmail(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function emptyEmail(){$("#email_error").remove()}var hasPhoneError,hasEmailError,countryData,pwd1,pwd2,sDate,eDate;function enableDisableButton(){hasPhoneError||hasEmailError?$("form").find("button[type='submit']").prop("disabled",!0):$("form").find("button[type='submit']").prop("disabled",!1)}function formattedPhone(){var e;""!=$("#phone").val&&(e=$("#phone").intlTelInput("getNumber").replace(/-|\s/g,""),$("#formattedPhone").val(e))}function validateEmail(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function emptyEmail(){$("#email_error").remove()}function checkInvalidAndDuplicatePhoneNumberForUserProfile(e,t,n){var a=$("input[name=phone]");""!==$.trim(a.val())?a.intlTelInput("isValidNumber")&&isValidPhoneNumber($.trim(a.val()))?($("#tel-error").html(""),$("#id").val(),$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",url:ajaxUrl,dataType:"json",cache:!1,data:{phone:e,carrierCode:t,id:n}}).done(function(e){1==e.status?($("#tel-error").html(""),$("#phone-error").show(),$("#phone-error").addClass("error").html(e.fail).css("font-weight","bold"),hasPhoneError=!0,enableDisableButton()):0==e.status&&($("#tel-error").show(),$("#phone-error").html(""),hasPhoneError=!1,enableDisableButton())})):($("#tel-error").addClass("error").html("Please enter a valid International Phone Number.").css("font-weight","bold"),hasPhoneError=!0,enableDisableButton(),$("#phone-error").hide()):($("#tel-error").html(""),$("#phone-error").html(""),hasPhoneError=!1,enableDisableButton())}function confirmPwd(){pwd1.value!=pwd2.value?pwd2.setCustomValidity("Passwords Don't Match"):pwd2.setCustomValidity("")}function restrictNumberToPrefdecimalOnInput(e){var t=$("select#currency_id").find(":selected").data("type");restrictNumberToPrefdecimal(e,t)}function determineDecimalPoint(){"fiat"==$("select#currency_id").find(":selected").data("type")&&($(".pFees, .fFees, .total_fees").text(FIATDP),$("#amount").attr("placeholder",FIATDP))}function checkAmountLimitAndFeesLimit(){var e=$("input[name = _token]").val(),t=$("#amount").val(),n=$("#currency_id").val(),a=$("#payment_method").val();$.ajax({method:"POST",url:ajaxUrl,dataType:"json",data:{_token:e,amount:t,currency_id:n,payment_method_id:a,agent_id:agentId,transaction_type_id:transactionTypeId}}).done(function(e){return 200==e.success.status?($("#percentage_fee").val(e.success.feesPercentage),$("#fixed_fee").val(e.success.feesFixed),$(".percentage_fees").html(e.success.feesPercentage),$(".fixed_fees").html(e.success.feesFixed),$(".total_fees").val(e.success.totalFees),$(".total_fees").html(e.success.totalFeesHtml),$(".pFees").html(e.success.pFeesHtml),$(".fFees").html(e.success.fFeesHtml),$(".amountLimit").text(""),$("#deposit-create").attr("disabled",!1),!0):""!=t?($(".amountLimit").text(e.success.message),$("#deposit-create").attr("disabled",!0),!1):void $(".amountLimit").text("")})}$(".content").find("#agentCreate").length&&(hasEmailError=hasPhoneError=!1,pwd1=document.getElementById("password"),pwd2=document.getElementById("confirm_password"),pwd1.onchange=confirmPwd,pwd2.onkeyup=confirmPwd,$(function(){$(".select2").select2({})}),$(document).ready(function(){$("#phone").intlTelInput({separateDialCode:!0,nationalMode:!0,preferredCountries:[countryShortCode],autoPlaceholder:"polite",placeholderNumberType:"MOBILE",initialCountry:"auto",geoIpLookup:function(t){$.get("https://ipinfo.io",function(){},"jsonp").always(function(e){e=e&&e.country?e.country:countryShortCode;t(e)})},utilsScript:SITE_URL+"/public/backend/intl-tel-input-13.0.0/intl-tel-input-13.0.0/build/js/utils.js"});var e=$("#phone").intlTelInput("getSelectedCountryData");$("#defaultCountry").val(e.iso2),$("#carrierCode").val(e.dialCode),$("#phone").on("countrychange",function(e,t){formattedPhone(),$("#defaultCountry").val(t.iso2),$("#carrierCode").val(t.dialCode),""!==$.trim($(this).val())?$(this).intlTelInput("isValidNumber")&&isValidPhoneNumber($.trim($(this).val()))?($("#tel-error").html(""),$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",url:ajaxUrl,dataType:"json",cache:!1,data:{phone:$.trim($(this).val()),carrierCode:$.trim(t.dialCode)}}).done(function(e){1==e.status?($("#tel-error").html(""),$("#phone-error").show(),$("#phone-error").addClass("error").html(e.fail).css("font-weight","bold"),hasPhoneError=!0,enableDisableButton()):0==e.status&&($("#tel-error").show(),$("#phone-error").html(""),hasPhoneError=!1,enableDisableButton())})):($("#tel-error").addClass("error").html(intPhnMgs).css("font-weight","bold"),hasPhoneError=!0,enableDisableButton(),$("#phone-error").hide()):($("#tel-error").html(""),$("#phone-error").html(""),hasPhoneError=!1,enableDisableButton())})}),$(document).ready(function(){$("input[name=phone]").on("blur",function(e){var t,n;formattedPhone(),""!==$.trim($(this).val())?$(this).intlTelInput("isValidNumber")&&isValidPhoneNumber($.trim($(this).val()))?(t=$(this).val().replace(/-|\s/g,""),t=$(this).val().replace(/^0+/,""),n=$("#phone").intlTelInput("getSelectedCountryData").dialCode,$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",url:ajaxUrl,dataType:"json",data:{phone:t,carrierCode:n}}).done(function(e){1==e.status?0==t.length?$("#phone-error").html(""):($("#phone-error").addClass("error").html(e.fail).css("font-weight","bold"),hasPhoneError=!0,enableDisableButton()):0==e.status&&($("#phone-error").html(""),hasPhoneError=!1,enableDisableButton())}),$("#tel-error").html(""),$("#phone-error").show(),hasPhoneError=!1,enableDisableButton()):($("#tel-error").addClass("error").html(intPhnMgs).css("font-weight","bold"),hasPhoneError=!0,enableDisableButton(),$("#phone-error").hide()):($("#tel-error").html(""),$("#phone-error").html(""),hasPhoneError=!1,enableDisableButton())})}),$(document).ready(function(){$("#email").on("blur",function(e){var t=$("#email").val();if(emptyEmail(),!validateEmail(t))return $("#email").parent("div").append('<span id="email_error" style="font-weight: bold" class="error">Please enter a valid email.</span>'),hasEmailError=!1,enableDisableButton(),!1;$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",url:emailCheckAjaxUrl,dataType:"json",data:{email:t}}).done(function(e){1==e.status?($("#email").parent("div").append('<span id="email_error" style="font-weight: bold" class="error">'+e.fail+"</span>"),hasEmailError=!0,enableDisableButton()):0==e.status&&(emptyEmail(),hasEmailError=!1,enableDisableButton())})})}),$(document).on("click",".admin-user-deposit-confirm-back-btn",function(e){e.preventDefault(),window.history.back()})),$(".content").find("#agentEdit").length&&(hasEmailError=hasPhoneError=!1,$(function(){$(".select2").select2({}),$("#phone").intlTelInput({separateDialCode:!0,nationalMode:!0,preferredCountries:["us"],autoPlaceholder:"polite",placeholderNumberType:"MOBILE",formatOnDisplay:!1,utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/13.0.4/js/utils.js"}).done(function(){null!==formatted&&null!==carrierCode&&null!==defaultCountry&&($("#phone").intlTelInput("setNumber",formatted),$("#defaultCountry").val(defaultCountry),$("#carrierCode").val(carrierCode))})}),countryData=$("#phone").intlTelInput("getSelectedCountryData"),$("#defaultCountry").val(countryData.iso2),$("#carrierCode").val(countryData.dialCode),$("#phone").on("countrychange",function(e,t){$("#defaultCountry").val(t.iso2),$("#carrierCode").val(t.dialCode),formattedPhone();var n=$("#id").val();checkInvalidAndDuplicatePhoneNumberForUserProfile($.trim($(this).val()),$.trim(t.dialCode),n)}),$("#phone").on("blur",function(e){formattedPhone();var t=$("#id").val();$(this).val().replace(/-|\s/g,"");checkInvalidAndDuplicatePhoneNumberForUserProfile($(this).val().replace(/^0+/,""),$(this).intlTelInput("getSelectedCountryData").dialCode,t)}),$(document).ready(function(){$("#email").on("blur",function(e){var t=$(this).val(),n=$("#id").val();if(emptyEmail(),!validateEmail(t))return $("#email").parent("div").append('<span id="email_error" style="font-weight: bold" class="error">Please enter a valid email.</span>'),hasEmailError=!1,enableDisableButton(),!1;$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",url:emailCheckAjaxUrl,dataType:"json",data:{email:t,agent_id:n}}).done(function(e){1==e.status?($("#email").parent("div").append('<span id="email_error" style="font-weight: bold" class="error">'+e.fail+"</span>"),hasEmailError=!0,enableDisableButton()):0==e.status&&(emptyEmail(),hasEmailError=!1,enableDisableButton())})})}),pwd1=document.getElementById("password"),pwd2=document.getElementById("confirm_password"),pwd1.onchange=confirmPwd,pwd2.onkeyup=confirmPwd),$(".content").find("#deposit").length&&($(".select2").select2({}),$(window).on("load",function(e){determineDecimalPoint(),checkAmountLimitAndFeesLimit()}),$(document).on("input",".amount",function(e){checkAmountLimitAndFeesLimit()}),$(document).on("change",".wallet",function(e){determineDecimalPoint(),checkAmountLimitAndFeesLimit()})),$(".content").find("#revenue").length&&($(".select2").select2({}),$("#daterange-btn").daterangepicker({ranges:{Today:[moment(),moment()],Yesterday:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Last 7 Days":[moment().subtract(6,"days"),moment()],"Last 30 Days":[moment().subtract(29,"days"),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},startDate:moment().subtract(29,"days"),endDate:moment()},function(e,t){var n=dateFormateType.toUpperCase();sDate=moment(e,"MMMM D, YYYY").format(n),$("#startfrom").val(sDate),eDate=moment(t,"MMMM D, YYYY").format(n),$("#endto").val(eDate),$("#daterange-btn span").html("&nbsp;"+sDate+" - "+eDate+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;")}),$(document).ready(function(){$("#daterange-btn").mouseover(function(){$(this).css("background-color","white"),$(this).css("border-color","grey !important")});var e=formDate,t=toDate;""==e?$("#daterange-btn span").html('<i class="fa fa-calendar"></i> '+pickDateRange+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"):$("#daterange-btn span").html(e+" - "+t+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;")}),$(document).ready(function(){$("#csv").on("click",function(e){e.preventDefault();var t=$("#startfrom").val(),n=$("#endto").val(),a=$("#currency").val(),r=$("#type").val(),e=$("#user_id").val();window.location=SITE_URL+"/admin/agents/revenues/csv?startfrom="+t+"&endto="+n+"&currency="+a+"&type="+r+"&user_id="+e})}),$(document).ready(function(){$("#pdf").on("click",function(e){e.preventDefault();var t=$("#startfrom").val(),n=$("#endto").val(),a=$("#currency").val(),r=$("#type").val(),e=$("#user_id").val();window.location=SITE_URL+"/admin/agents/revenues/pdf?startfrom="+t+"&endto="+n+"&currency="+a+"&type="+r+"&user_id="+e})}),$("#user_input").on("keyup keypress",function(e){"keyup"!=e.type&&"keypress"!=e.type||0===$("form").find("input[type='text']").val().length&&($("#user_id").val(""),$("#error-user").html(""),$("form").find("button[type='submit']").prop("disabled",!1))}),$("#user_input").autocomplete({source:function(e,t){0<e.term.length?$.ajax({url:ajaxUrl,dataType:"json",type:"get",data:{search:e.term},success:function(e){$("form").find("button[type='submit']").prop("disabled",!0),"success"==e.status?t($.map(e.data,function(e){return{id:e.agent_id,first_name:e.first_name,last_name:e.last_name,value:e.first_name+" "+e.last_name}})):"fail"==e.status&&$("#error-user").addClass("text-danger").html(userDoesntExist)}}):(console.log(e.term.length),$("#user_id").val(""))},select:function(e,t){t=t.item;$("#error-user").html(""),$("#user_id").val(t.id),$("form").find("button[type='submit']").prop("disabled",!1)},minLength:0,autoFocus:!0})),$(".content").find("#transaction").length&&($(".select2").select2({}),$("#daterange-btn").daterangepicker({ranges:{Today:[moment(),moment()],Yesterday:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Last 7 Days":[moment().subtract(6,"days"),moment()],"Last 30 Days":[moment().subtract(29,"days"),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},startDate:moment().subtract(29,"days"),endDate:moment()},function(e,t){var n=dateFormateType.toUpperCase();sDate=moment(e,"MMMM D, YYYY").format(n),$("#startfrom").val(sDate),eDate=moment(t,"MMMM D, YYYY").format(n),$("#endto").val(eDate),$("#daterange-btn span").html("&nbsp;"+sDate+" - "+eDate+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;")}),$(document).ready(function(){$("#daterange-btn").mouseover(function(){$(this).css("background-color","white"),$(this).css("border-color","grey !important")});var e=formDate,t=toDate;""==e?$("#daterange-btn span").html('<i class="fa fa-calendar"></i>  '+pickDateRange):$("#daterange-btn span").html(e+" - "+t+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;")})),$(".content").find("#wallet").length&&$(function(){$("#eachagentwallet").DataTable({order:[],language:language,pageLength:pageLength})});